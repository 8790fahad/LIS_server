


SELECT get_applications2 (
    'PSSecretary',
	'Registry',
	'New File'
)


CREATE OR REPLACE FUNCTION get_files(in_forward_to VARCHAR(20),
    in_status VARCHAR(20),query_type VARCHAR(20)
)
  RETURNS TABLE ackid VARCHAR, createdAt TIMESTAMPTZ  AS 
$$
BEGIN
    IF query_type ='PSSecretary' THEN
        RETURN QUERY
            SELECT "ack_id" as ackid, "createdAt"
            FROM   public."Applications" 
            WHERE  forward_to = in_forward_to ;
    ELSE
        RETURN QUERY
            SELECT "ack_id" as ackid, "createdAt"
            FROM   public."Applications" 
            WHERE  status=in_status AND forward_to = in_forward_to  ORDER BY id ASC LIMIT 10;

END
$$ LANGUAGE plpgsql;
